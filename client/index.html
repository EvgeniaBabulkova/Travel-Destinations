<!DOCTYPE html>
<html>
<head>
    <title>My HTML Page</title>
    <style>
        /* Ensure the HTML and body take the full height of the viewport */
        html, body {
                margin: 0;
                padding: 0;
                width: 100%;
                /* height: 100%;
                /* display: flex;
                flex-direction: column; */
                background: linear-gradient(to bottom, #c2e7f5, #93c7fa); /* Light blue gradient */
        }

        /* Style for main content area */
        .main-content {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        /* Style for sidebar */
        .sidebar {
            width: 300px;
            background-color: #edf1f1;
            padding: 1rem;
            height: 100vh; /* Full window height */
            position: fixed;
            top: 0;
            right: -400px; /* Initially hidden off-screen */
            z-index: 1000;
            transition: right 0.3s ease; /* Transition effect */
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0.7;
        }

        .sidebar.show {
            right: 0; /* Slide in */
        }

        /* Style for iframe container */
        .iframe-container {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: auto;
        }

        /* Style for iframe */
        iframe {
            margin-top: 2rem;
            width: 1100px;
            height: 700px;
            border: none;
            zoom: 1.2;
        }

    </style>
</head>
<body>
    <div id="navbar"></div>

    <div id="user-buttons"></div>


    <div class="main-content">
        <div id="sidebar" class="sidebar">
            <p id="sidebar-content">Sidebar content</p>
            <button id="close-sidebar-button">Close</button>
        </div>


        <div class="iframe-container">
            <iframe id="worldMapIframe" src="worldMap.html"></iframe>
            <!-- <object id="worldMapIframe" type="text/html" data="worldMap.html"></object> -->
        </div>
    </div>



    <script type="module">
        import { loadNavbar, loadData, showSidebar, hideSidebar } from './utils.js';
        
        // load users and visited places
        // Load the navbar when the DOM is fully loaded
        document.addEventListener('DOMContentLoaded', () => {
            loadNavbar();
            loadData();

            // Attach the hideSidebar function to the button
            document.getElementById('close-sidebar-button').addEventListener('click', hideSidebar);
        });

        
        // Listen for messages from the iframe (gets info about the path clicked)
        window.addEventListener('message', (event) => {
            console.log('Message received from MAP:', event.data);
            if (event.data && event.data.pathId) {
                showSidebar(event.data.pathId);
            }
        });

        // Send a  test message to the iframe 
        // const iframe = document.getElementById('worldMapIframe');
        // iframe.onload = () => {
        //     console.log('Iframe loaded, sending a test message to child html');
        //     iframe.contentWindow.postMessage({ action: 'testing' }, '*');
        // };

        

    </script>
    <script src="users.js"></script>
    <script src="visitedPlaces.js"></script>

</body>
</html>